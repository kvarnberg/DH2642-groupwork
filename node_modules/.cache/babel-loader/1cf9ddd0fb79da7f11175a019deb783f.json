{"ast":null,"code":"var _jsxFileName = \"/Users/josephinekvarnberg/Documents/GitHub/jkv-juliahua-jumanm-saranaz-week2/src/components/search/Search.js\";\n//IMPORT\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Form, ListGroup } from \"react-bootstrap\";\nimport Nav from \"../nav/Nav\";\nimport firebase from \"firebase\"; //EXPORT\n\nexport default function Search() {\n  //STATE\n  const [jokes, setJokes] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const user = localStorage.user; //REF STORES A REFERENCE TO A DOM NODE\n\n  const FocusOnSearch = useRef(null); //ACCESS TO A CHILD'D DOM NODE FROM A PARENT COMPONENT\n\n  useEffect(() => {\n    FocusOnSearch.current.focus();\n  }, []); //GETTING THE API\n\n  const getJokes = async query => {\n    var url = `https://icanhazdadjoke.com/search?term=${query}`;\n    const results = await fetch(url, {\n      headers: {\n        accept: \"application/json\"\n      }\n    });\n    const jokes = await results.json();\n    return jokes.results;\n  }; //EFFECT PERFORMS SIDE EFFECTS IN FUNCTION COMPONENTS\n\n\n  useEffect(() => {\n    let currentQuery = true; //---\n\n    const loadJokes = async () => {\n      //IF QUERY != NONE RETURN THE EXISTING JOKES WITH THAT WORD\n      if (!query) return setJokes([]); //ALWAYS FIND A JOKE WITH THE WORD THAT THE USER HAS ENTERED\n\n      if (currentQuery) {\n        const jokes = await getJokes(query);\n        setJokes(jokes);\n      }\n    }; //---\n    //RUN ABOVE\n\n\n    loadJokes(); //ENTER AN INPUT FOR THE QUERY\n  }, [query]); //SHOW LIST OF JOKES(EVERY JOKE IN A BOX) WHEN ENTERING A WORD\n\n  let jokeComponents = jokes.map(AllResultsFromTheApi => {\n    return React.createElement(ListGroup.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, AllResultsFromTheApi.joke, React.createElement(\"button\", {\n      onClick: () => onAdd(AllResultsFromTheApi),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Save\"));\n  });\n\n  const onAdd = joke => {\n    const db = firebase.firestore();\n    db.collection(\"users\").doc(user).collection(\"savedjokes\").add({\n      content: joke.joke,\n      apiId: joke.id\n    });\n  }; //STYLING THE RESULT\n\n\n  const mystyle = {\n    color: \"black\",\n    backgroundColor: \"white\",\n    padding: \"10px\",\n    fontFamily: \"Times\"\n  }; //SHOW THE RESULT\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Nav, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(\"h4\", {\n    style: mystyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"Search For A Joke\"), React.createElement(Form.Control, {\n    style: mystyle,\n    placeholder: \"Search for a Joke...\",\n    ref: FocusOnSearch,\n    onChange: e => setQuery(e.target.value),\n    value: query,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    style: mystyle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, jokeComponents));\n}","map":{"version":3,"sources":["/Users/josephinekvarnberg/Documents/GitHub/jkv-juliahua-jumanm-saranaz-week2/src/components/search/Search.js"],"names":["React","useState","useEffect","useRef","Form","ListGroup","Nav","firebase","Search","jokes","setJokes","query","setQuery","user","localStorage","FocusOnSearch","current","focus","getJokes","url","results","fetch","headers","accept","json","currentQuery","loadJokes","jokeComponents","map","AllResultsFromTheApi","joke","onAdd","db","firestore","collection","doc","add","content","apiId","id","mystyle","color","backgroundColor","padding","fontFamily","e","target","value"],"mappings":"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","sourcesContent":["//IMPORT\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Form, ListGroup } from \"react-bootstrap\";\nimport Nav from \"../nav/Nav\";\nimport firebase from \"firebase\";\n\n//EXPORT\nexport default function Search() {\n  //STATE\n  const [jokes, setJokes] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const user = localStorage.user;\n\n  //REF STORES A REFERENCE TO A DOM NODE\n  const FocusOnSearch = useRef(null);\n  //ACCESS TO A CHILD'D DOM NODE FROM A PARENT COMPONENT\n  useEffect(() => {\n    FocusOnSearch.current.focus();\n  }, []);\n\n  //GETTING THE API\n  const getJokes = async query => {\n    var url = `https://icanhazdadjoke.com/search?term=${query}`;\n    const results = await fetch(url, {\n      headers: { accept: \"application/json\" }\n    });\n    const jokes = await results.json();\n    return jokes.results;\n  };\n\n  //EFFECT PERFORMS SIDE EFFECTS IN FUNCTION COMPONENTS\n  useEffect(() => {\n    let currentQuery = true;\n\n    //---\n    const loadJokes = async () => {\n      //IF QUERY != NONE RETURN THE EXISTING JOKES WITH THAT WORD\n      if (!query) return setJokes([]);\n      //ALWAYS FIND A JOKE WITH THE WORD THAT THE USER HAS ENTERED\n      if (currentQuery) {\n        const jokes = await getJokes(query);\n        setJokes(jokes);\n      }\n    };\n    //---\n\n    //RUN ABOVE\n    loadJokes();\n\n    //ENTER AN INPUT FOR THE QUERY\n  }, [query]);\n\n  //SHOW LIST OF JOKES(EVERY JOKE IN A BOX) WHEN ENTERING A WORD\n  let jokeComponents = jokes.map(AllResultsFromTheApi => {\n    return (\n      <ListGroup.Item>\n        {AllResultsFromTheApi.joke}\n        <button onClick={() => onAdd(AllResultsFromTheApi)}>Save</button>\n      </ListGroup.Item>\n    );\n  });\n\n  const onAdd = joke => {\n    const db = firebase.firestore();\n    db.collection(\"users\")\n      .doc(user)\n      .collection(\"savedjokes\")\n      .add({ content: joke.joke, apiId: joke.id });\n  };\n\n  //STYLING THE RESULT\n  const mystyle = {\n    color: \"black\",\n    backgroundColor: \"white\",\n    padding: \"10px\",\n    fontFamily: \"Times\"\n  };\n\n  //SHOW THE RESULT\n  return (\n    <div>\n      <Nav />\n      <h4 style={mystyle}>Search For A Joke</h4>\n      <Form.Control\n        style={mystyle}\n        placeholder=\"Search for a Joke...\"\n        ref={FocusOnSearch}\n        onChange={e => setQuery(e.target.value)}\n        value={query}\n      />\n      <div style={mystyle}>{jokeComponents}</div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}